---
layout: article
title:  "家庭网络拓扑&网络相关设备推荐"
tags: "瞎折腾"
excerpt_type: html
article_header:
  type: overlay
  background_image:
    src: /pics/pic1.JPG
---
家庭网络好物分享哦~还有一点软路由私货~🎉
<!--more-->
## 为什么要做好家庭网络的架设
很多小伙伴都遇见过类似的情况：
* 为什么我打游戏经常卡
* 为什么我一到厕所就没信号
* 为什么我很快的宽带但是下载速度很慢等等问题。

很多小伙伴会把这些问题归结于玄学，要么来一句“xx手机真难用，balabala。。。。”
但是其实很多时候这些问题都归结于你的网络设备or你的网络架构问题。所以今天就来分享一下网络架构相关的知识。
![-c400](media/15982403180376/15982518775659.jpg)
<center><font size=2 color=#009688>自己家的网络配置</font></center>

## 软路由or硬路由
大家在用路由器，那么软路由和硬路由分别是啥呢
### 硬路由
这个就是大家常见的路由器，比如之前买宽带送的水星路由器相信大家很多人都看过
![-c400](media/15982403180376/15982528349394.jpg)
或者很多人家里都是光猫&路由器二合一的设备：
![-c400](media/15982403180376/15982528824834.jpg)
*一般家里用这种光猫路由器二合一的网络环境都不好*

这些带路由功能的统称为硬路由，一般具有以下特征：
* 自带路由发射功能（即可以发射无线网信号）
* 性能比较羸弱
* 高端设备和低端设备价格悬殊

### 硬路由
硬路由一般是一些不是路由器的设备，通过多口网卡，充当nat&拨号等功能的小型pc。
例如
![-c500](media/15982403180376/IMG_93A9BB181634-1.jpeg)
这种就是刷了基于linux的openwrt的软路由，不具备无线功能，只有拨号&NAT等硬路由除了无线之外的功能。

软路由主要相比于硬路由的能力就是性能强（一般都是x86的u，比起硬路由的arm性能强很多），一台最便宜的j1900的软路由带机量即可上百，而j1900的价格：
![-c400](media/15982403180376/IMG_6314.jpg)

注意这个是带主板的价格

有了这个基本上插个几十块的内存和硬盘再接个12v的dc供电电源再接一个pcie的千兆双网口网卡就可以充当软路由了，全部成本不超过500块。

顺便安利一波我这个软路由，透明亚克力板看起来就很Geek：
![-c400](media/15982403180376/IMG_5914.jpg)



### 软路由硬路由该选谁呢
如果你只是拿来浏览网页，那你只需要一个硬路由就可以了

但是如果你对网络有一丢丢需求，那都应该上软路由。下面分析一下各个形式的路由的优缺点

*光猫路由二合一*

优点：
* 便宜

缺点：
* 性能很差
* 一般支持网络协议较老，同时AloT设备接入会影响网速

*硬路由*

优点：
* 功能都放一起，比较便捷

缺点：
* 性能比较羸弱
* 可定制性比较差
* NAT和加解密包同时进行，比较吃性能

*软路由*

缺点：
* 比较折腾

优点：
* 性能强劲
* x86架构，可玩性比较好
* 拨号，NAT，无线功能分开，各司其职

软路由能做的，但硬路由不能做的：
* *插件*。不仅仅只是网络插件的差别，拿LEDE举例，网络插件恰恰被从酷软中心拿掉了，哈哈，求生欲很强。但剩下的那些插件可不是一无是处，比如ftp就很有用，还有很多插件，自己探索吧。
* *网络插件*。单独说下这个插件，对于软路由系统比如LEDE其支持更高级的Clash/Surge方式，这才是软路由使用网络查件的正确姿势。没错，这就是国内要想从TV看油管4K的必备，基本没什么其他解决方案。
* *平台扩展*。要搞清楚软路由是什么，它一般依托于工控机平台（MiniPC），拿我自己的软路由来说，我可以物理机装LEDE、装爱快；但当然，我也可以装PVM、装ESXi，然后以虚拟机的方式运行我的软路由系统，在网卡直通的条件下软路由性能基本不受影响。所以如果以ESXi的方式，你完全可以安装其他的虚拟机，打造自己的本地云主机。你可以装Linux挂脚本、可以装Win10/7挂机器人，总之，你可以有若干台24小时运行的虚拟机，结合公网IP或者DDNS，可以获得和阿里云主机基本一样的效果，说到这里，想想4核16G200M带宽（上行5M/s）的阿里云主机要多少钱一年。
* *性能*。终于说到性能了，我的看法，200M宽带及以上直接上软路由不用考虑其他（土豪钱多可以买高端路由）；其他的想全家网络番茄的，可以软路由，也可以硬路由刷梅林固件（梅林的插件的性能要差得多，但一般视频需求也足够了）。另外，看硬件，硬路由其实处理器性能很弱（比较同价位的软路由），外加需要同时支持无线网卡，这其实会影响整体的路由处理能力，但软路由+AP的模式，其实更适合高带宽场景。


软路由还可以拿来做的事情：
局域网文件传输，DDNS，去广告，网易云灰色歌曲解锁，迅雷快鸟，应用网络限制，网络唤醒，Turbo ACC网络加速，ser2net

## AP or Router？
### AP模式
ap模式是路由器的一种模式，在这个模式里面路由器只需要接入一根可以上网的网线（比如路由器的lan），这样子即可完成无线上网需求。路由器在这种模式下面相当于一个无线到有线的转换，啥都不负责。
### Router模式
Router是路由器最常见的模式，也是接入一根网线即可，不同的是这里路由器会接管DHCP，即给接入的设备分配网络地址，本身相当于一层网关。

### 该选谁？
当你需要使用到路由器本身的一些功能时，选择Router模式比较好，因为这里Router会对网络本身进行管理。
其他情况一律选择AP，因为选择Router的话，相当于多了一层网关，网络本身的带宽和延迟肯定会有影响，而且端口转发一定会收到影响。

## 多路由管理
在家庭环境中，由于面积会较大，可能一台路由器不够使用，这个时候需要多路由器来满足不同环境的上网需求（比如马桶time）
但是如果你简单的在每个地方放一个路由器，你会发现每到一个地方就需要手动切换一次Wi-Fi，非常的麻烦，为了解决这个问题，AC+AP的路由器模式就成为了我们的选择。
在AC+AP模式下，一台路由器充当了管理中心（AC），所有的AP放在不同的地方，共享一个SSID，通过ac的控制来实现全局的无缝切换。

## 路由器怎么选
![-c600](media/15982403180376/15982575529396.jpg)

现在购买建议直接选用Wi-Fi6的路由器，网络体验会极佳，比如：
![-c400](media/15982403180376/15982576226238.jpg)
（不买不是人系列）

## 其他网络设备推荐
### NAS
NAS（Network Attached Storage：网络附属存储），如果你有存储云文件，文件局域网共享的需求，喜欢追剧看电影，又或是爱好摄影，一台NAS基本上是你的必买产品之一。

*NAS可以拿来做的事情*
1. 存储文件，局域网共享
2. 自动同步各种云盘文件
![-c400](media/15982403180376/15982578820871.jpg)
1. 远程开始下载文件：
![-c600](media/15982403180376/15982580320767.jpg)
绑定微信可以随时随地远程开始下载，最重要的是，自带迅雷会员不会限速！
1. 作为家庭的影音娱乐中心，通过Samba即可局域网共享文件，实现在nas上面下载，晚上回到家在电视&电脑&手机上直接观看
2. 充当流媒体服务器，当你在外面的时候也可以连回家里随时随地享受流媒体播放
3. 绑定ddns服务，随时随地远程访问nas，可以直接访问nas文件
4. 局域网存储文件等，速度取决于你的环境，一般我的速度是维持在130MB/s
5. NAS提供iSCSI服务，电脑本地挂载iSCSI的磁盘，就相当于是本地硬盘了，可以把电脑的文件直接放到iSCSI的磁盘上面，而且配合raid阵列体验会比本地还要好
6. x86的nas提供docker，可玩性很高，比如lancache，配合上面那种可以直接实现多人共享同一份文件，比如玩游戏就不用每个人下一份了

这么好的一个东西，需要多少钱呢，白群晖的价格动辄好几千，不太适合家用，推荐使用第三方魔改的黑群晖，价格一般不超过600块，四盘位，很超值。

当然作为程序员，由于nas本身就是一台很小的电脑，我们还可以用它来做代码版本管理，文档版本管理，充当自己的blog网站等等功能